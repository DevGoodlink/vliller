<ion-view class="home-view" hide-back-button="true">
    <ion-nav-bar class="bar-assertive">
        <ion-nav-back-button class="no-text"></ion-nav-back-button>

        <ion-nav-buttons side="right">
            <button ng-click="HomeCtrl.updatePosition()" class="button button-clear">
                <img ng-hide="HomeCtrl.isGPSLoading" class="img-responsive" src="assets/img/md_gps.svg">
                <ion-spinner ng-show="HomeCtrl.isGPSLoading" icon="android" class="spinner-light"></ion-spinner>
            </button>
        </ion-nav-buttons>
    </ion-nav-bar>

    <ion-nav-title>
        <img class="img-responsive bar-header-logo" src="assets/img/vliller-header-logo.png">
    </ion-nav-title>

    <ion-content class="home-content">
        <div class="content-loader" ng-show="HomeCtrl.isLoading" ng-cloak>
            <ion-spinner icon="android" class="spinner-assertive"></ion-spinner>
        </div>

        <!-- map -->
        <div class="map-container" data-tap-disabled="true" ng-hide="HomeCtrl.isLoading">
            <div id="map-canvas" class="map-canvas">
            <div class="card-container">

                <!-- station details -->
                <div class="card map-card" ng-if="HomeCtrl.activeStation">
                    <div class="content-loader padding" ng-hide="HomeCtrl.activeStation.$loaded" ng-cloak>
                        <ion-spinner icon="android" class="spinner-assertive"></ion-spinner>
                    </div>

                    <div ng-show="HomeCtrl.activeStation.$loaded">

                        <!-- station name, uptime and CB -->
                        <div class="item item-header">
                            <div class="station-name">{{ HomeCtrl.activeStation.name }}</div>
                            <div class="positive station-distance">{{ HomeCtrl.formatDistance() }}</div>

                            <p class="text-small text-grey">Il y a {{ HomeCtrl.activeStation.lastupd }}</p>

                            <!-- CB -->
                            <div class="station-cb">
                                <img ng-show="HomeCtrl.activeStation.payment === 'AVEC_TPE'" class="img-responsive" src="assets/img/vliller-cb.png">
                                <img ng-hide="HomeCtrl.activeStation.payment === 'AVEC_TPE'" class="img-responsive" src="assets/img/vliller-no-cb.png">
                            </div>
                        </div>

                        <!-- station bike/attachs -->
                        <div class="item item-content" ng-if="HomeCtrl.activeStation.status === '0'">

                            <!-- bikes -->
                            <div class="station-bikes">
                                <div class="station-number">
                                    <div class="station-number-text {{ HomeCtrl.computeColorClass(HomeCtrl.activeStation.bikes) }}">{{ HomeCtrl.activeStation.bikes }}</div>

                                    <div><img class="img-responsive" ng-src="{{ HomeCtrl.computeBikesIcon(HomeCtrl.activeStation.bikes) }}"></div>
                                </div>

                                <p ng-if="HomeCtrl.activeStation.bikes > 1" class="text-small">vélos disponibles</p>
                                <p ng-if="HomeCtrl.activeStation.bikes <= 1" class="text-small">vélo disponible</p>
                            </div>

                            <!-- docks -->
                            <div class="station-docks">
                                <div class="station-number">
                                    <div class="station-number-text {{ HomeCtrl.computeColorClass(HomeCtrl.activeStation.docks) }}">{{ HomeCtrl.activeStation.docks }}</div>

                                    <div><img class="img-responsive" ng-src="{{ HomeCtrl.computeDocksIcon(HomeCtrl.activeStation.docks) }}"></div>
                                </div>

                                <p ng-if="HomeCtrl.activeStation.docks > 1" class="text-small">places libres</p>
                                <p ng-if="HomeCtrl.activeStation.docks <= 1" class="text-small">place libre</p>
                            </div>
                        </div>

                        <!-- station HS -->
                        <div class="item item-content" ng-if="HomeCtrl.activeStation.status !== '0'">
                            <p class="station-dead assertive">
                                Station indisponible
                            </pb>
                        </div>
                    </div>
                </div>

                <!-- navigate to -->
                <div ng-click="HomeCtrl.navigate()" ng-show="HomeCtrl.activeStation.$loaded" class="floating-button positive-bg">
                   <img class="img-responsive" src="assets/img/md_directions.svg">
                </div>

            </div>
            </div>
        </div>
    </ion-content>
</ion-view>
